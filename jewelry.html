<!DOCTYPE html>
<html lang="">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <link rel="stylesheet" href="style.css">
    <style>
        img {
            width: 100%
        }

        body {
            padding: 0 40px;
        }

        @media(min-width: 700px) {
            #jewelry_section {
                height: 100vh;
                display: grid;
                grid-gap: 40px;
                grid-template-columns: repeat(4, 1fr);
                grid-auto-rows: 1fr;

            }

            #jewelry_section img {
                height: 35vh;
            }

            #jewelry_section h2,
            h3,
            p {
                padding: 12px;
                margin-left: -11px;
            }
    </style>
</head>




<body>

    <template>
        <article class="smykker_template">
            <img class="billede" src="">
            <h2 class="navn"></h2>
            <p class="pris"></p>
            <a class="link" href="">Se produkt</a>
        </article>
    </template>

    <main>
        <section>
            <h1>Argentum collection</h1>
            <article class="filter_knapper">
                <button class="filter valgt" data-kategori="alle">Alle</button>
                <button class="filter" data-kategori="halskaeder">Necklaces</button>
                <button class="filter" data-kategori="armbaand">Bracelets</button>
                <button class="filter" data-kategori="oereringe">Earrings</button>
                <button class="filter" data-kategori="ringe">Rings</button>
            </article>

            <section id="list"></section>
        </section>

        <section id="jewelry_section"></section>
    </main>

    <script>
        document.addEventListener("DOMContentLoaded", start);

        // Variabel url er linket til siden.
        const url = "http://deacosmus.dk/kea/10_eksamen/hjemmeside/wordpress/wp-json/wp/v2/smykker?per_page=100";
        // Variablen skabelon, er templatens indhold.
        const skabelon = document.querySelector("template").content;
        // Variablen smykkeListe, er den section hvor indholdet fra pods skal indsættes i.
        const smykkeListe = document.querySelector("jewelry_section");
        let indhold;
        let filter = "alle";
        let smykker;
        addEventListenersToButtons();


        async function start() {
            console.log("start");
            const hentUrl = await fetch(url);
            indhold = await hentUrl.json();
            visIndhold();
        }


        function visIndhold() {
            console.log("visIndhold");
            indhold.forEach(smykke => {
                const klon = skabelon.cloneNode(true);
                if (filter == "alle" || filter == smykke.categories) {
                    console.log("indlæs et smykke");
                    klon.querySelector(".billede").src = smykke.billede.guid;
                    klon.querySelector(".navn").textContent = smykke.navn;
                    klon.querySelector(".pris").textContent = smykke.pris;
                    klon.querySelector(".link").href = "singleview.html?id=" +
                        smykke.id;

                    jewelry_section.appendChild(klon);
                }




                //                if (filter === "alle") {
                //                    console.log("indlæs et smykke");
                //                    klon.querySelector(".billede").src = smykke.billede.guid;
                //                    klon.querySelector(".navn").textContent = smykke.navn;
                //                    klon.querySelector(".pris").textContent = smykke.pris;
                //                    klon.querySelector(".link").href = "singleview.html?id=" +
                //                        smykke.id;
                //                    console.log(smykke.kat);
                //                    jewelry_section.appendChild(klon);
                //                } else {
                //                    if (filter === smykke.kat) {
                //                        console.log("indsæt alle smykker med kat = Halskaede");
                //                        klon.querySelector(".billede").src = smykke.billede.guid;
                //                        klon.querySelector(".navn").textContent = smykke.navn;
                //                        klon.querySelector(".pris").textContent = smykke.pris;
                //                        klon.querySelector(".link").href = "singleview.html?id=" +
                //                            smykke.id;
                //                        jewelry_section.appendChild(klon);
                //                    }
                //                }
            })
            addEventListenersToButtons();
        }


        function addEventlistenersToButtons() {
            document.querySelectorAll(".filter").forEach(button => {
                button.addEventListener("click", filterBTNs);
            });
        }

        function filterBTNs() {
            filter = this.dataset.categories;
            vis();
        }
        hentdata(fil);

        //        //vi adder en click funktion alle med classen filter. Som kalder funktionen filterButtons
        // function addEventListenersToButtons() {
        // console.log("knapper aktiveret");
        // document.querySelectorAll(".filter").forEach((button) => {
        // button.addEventListener("click", filterButtons);
        // });
        // }
        // // Denne funktion udskriver indholdet på siden. Alt efter hvilken knap der trykkes på, vil indholdet i h3 ændre sig til det valgte.
        // function filterButtons() {
        // console.log("filter button pushed")
        // console.log(filter);
        // // filter = this.dataset.kategori; ----------- det field som hedder kat i wordpress skal matche disse muligheder
        // filter = "Halskaede";
        // console.log(filter);
        // document.querySelectorAll(".filter").forEach((button) => {
        // button.classList.remove("valgt");
        // })
        // this.classList.add("valgt");
        // console.log(this);
        // document.getElementById("jewelry_section").innerHTML = "";
        // visIndhold();
        // }
    </script>

</body></html>
